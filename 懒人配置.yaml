# ====================== ğŸ’» DNS è®¾ç½® (DNS) ======================
dns:
  enable: true
  cache-algorithm: arc
  prefer-h3: false
  use-hosts: true
  use-system-hosts: true
  # respect-rules: false - æ˜¯å¦å¼ºåˆ¶æ‰§è¡Œè§„åˆ™ä¸­çš„åŸŸåè§£æ (true: æ˜¯, false: å¦)
  # false: DNSè§£æä¸å¼ºåˆ¶éµå¾ªè§„åˆ™ï¼Œä¸»è¦ä¾èµ–enhanced-mode(fake-ip)å’Œfallback-filter/nameserver-policy
  # true: DNSè§£æä¼šå°è¯•éµå¾ªè§„åˆ™ï¼Œå¦‚æœåŒ¹é…åˆ°ä»£ç†è§„åˆ™ï¼Œå¯èƒ½ä¼šä½¿ç”¨ä»£ç†çš„DNSè¿›è¡Œè§£æ (å–å†³äºå®¢æˆ·ç«¯å®ç°)
  # å½“å‰é…ç½®ä¸ºfalseï¼Œé…åˆfake-ipæ˜¯å¸¸è§æ¨¡å¼ï¼Œé€šå¸¸æ— éœ€ä¿®æ”¹ã€‚
  respect-rules: false # ä¿æŒåŸæ ·ï¼Œé…åˆ fake-ip
  listen: 0.0.0.0:1053 # DNS ç›‘å¬åœ°å€å’Œç«¯å£
  ipv6: false          # æ˜¯å¦å¯ç”¨ IPv6 DNS (å–å†³äºä½ çš„ç½‘ç»œç¯å¢ƒå’Œéœ€æ±‚ï¼Œå¦‚æœä¸éœ€è¦IPV6ä»£ç†ï¼Œå¯ä»¥ä¿æŒfalse)
  default-nameserver: # é»˜è®¤çš„ DNS æœåŠ¡å™¨ï¼Œç”¨äº fallback-filter ä¸­æœªåŒ¹é…çš„è¯·æ±‚ (é€šå¸¸ç”¨å›½å†…å…¬å…±DNS)
    - 223.5.5.5
    - 223.6.6.6
  enhanced-mode: fake-ip # DNS å¢å¼ºæ¨¡å¼ (redir-host, fake-ip)ã€‚fake-ip å¸¸ç”¨äº TUN æ¨¡å¼ã€‚
  fake-ip-range: 198.18.0.1/16 # fake-ip èŒƒå›´ (æ ‡å‡†èŒƒå›´)
  fake-ip-filter-mode: blacklist # fake-ip è¿‡æ»¤æ¨¡å¼ (blacklist: é»‘åå•, whitelist: ç™½åå•)
  fake-ip-filter:    # fake-ip è¿‡æ»¤åˆ—è¡¨ (åˆ—å‡ºçš„åŸŸåä¸è¿›è¡Œ fake-ip è§£æï¼Œå°†ç›´æ¥è§£æçœŸå®IP)
    - '*.lan'
    # å¯ä»¥æ ¹æ®éœ€è¦æ·»åŠ å…¶ä»–ä¸éœ€è¦fake-ipçš„åŸŸåï¼Œä¾‹å¦‚ï¼š
    # - 'time.windows.com' # ç³»ç»Ÿæ—¶é—´åŒæ­¥
    # - 'connectivitycheck.gstatic.com' # å¥åº·æ£€æŸ¥URLï¼Œå¦‚æœfake-ipå¯¼è‡´æ£€æŸ¥å¤±è´¥

  nameserver-policy: # ç‰¹å®šè§„åˆ™é›†æˆ–åŸŸåçš„ DNS æœåŠ¡å™¨ç­–ç•¥ (ä¼˜å…ˆçº§é«˜äº nameserver)
    '+.arpa': '10.0.0.1' # arpa åŸŸåä½¿ç”¨æœ¬åœ° DNS (é€šå¸¸æ˜¯è·¯ç”±å™¨æˆ–ç³»ç»ŸDNS)
    # 'rule-set:chinamax' æŒ‡å‘DIRECTï¼Œè§£ææ—¶åº”ä½¿ç”¨å›½å†…DNS
    # å°†å…¶æŒ‡å‘ direct-nameserver ä¸­å®šä¹‰çš„å›½å†…DNSï¼Œä¸ä¸‹æ–¹ rules ä¸­çš„ DIRECT ç­–ç•¥ä¿æŒä¸€è‡´
    'rule-set:chinamax':
      - 223.5.5.5 # æŒ‡å‘ direct-nameserver ä¸­ç›¸åŒçš„å›½å†…DNS
      - 223.6.6.6 # æŒ‡å‘ direct-nameserver ä¸­ç›¸åŒçš„å›½å†…DNS
    # ç¤ºä¾‹ï¼šç‰¹å®šåŸŸåä½¿ç”¨ç‰¹å®šDNS
    # '+.apple.com': https://dns.alidns.com/dns-query # ç¤ºä¾‹ï¼šè‹¹æœåŸŸåä½¿ç”¨é˜¿é‡Œäº‘DoH

  nameserver: # ä¸»è¦çš„ DNS æœåŠ¡å™¨åˆ—è¡¨ (é€šå¸¸ç”¨äºå¢ƒå¤–æˆ–éå¼ºåˆ¶å›½å†…è§£æçš„åŸŸåï¼Œæˆ– fallback-filter æœªåŒ¹é…çš„åŸŸå)
    - https://doh.pub/dns-query # è…¾è®¯ DoH
    - https://cloudflare-dns.com/dns-query # Cloudflare DoH
    - https://dns.alidns.com/dns-query # é˜¿é‡Œ DoH
    - https://dns.quad9.net/dns-query # Quad9 DoH (æ”¯æŒECS)
  
  fallback: # å½“ nameserver ä¸­çš„ DNS è§£æå¤±è´¥ã€è¢«æ±¡æŸ“ï¼Œæˆ– fallback-filter åŒ¹é…æ—¶ä½¿ç”¨çš„å¤‡ç”¨ DNS
    # (é€šå¸¸ç”¨äºå¢ƒå†…æˆ–ä¸æ˜“è¢«æ±¡æŸ“çš„DNSï¼Œé…åˆgeoipå’Œgeositeä½¿ç”¨æ•ˆæœæ›´ä½³)
    - tls://dns.quad9.net # å¢ƒå¤–åŠ å¯† DNS ä½œä¸ºå¤‡ç”¨ (TLS ç«¯å£ 853)
    - https://cloudflare-dns.com/dns-query # å¢ƒå¤– DoH DNS ä½œä¸ºå¤‡ç”¨
    # å¯ä»¥è€ƒè™‘æ·»åŠ å›½å†…è¿è¥å•†æˆ–å…¬å…±DNSï¼Œä½†åœ¨æŸäº›ç¯å¢ƒä¸‹å¯èƒ½ä»å—æ±¡æŸ“
    # - 114.114.114.114

  proxy-server-nameserver: # é€šè¿‡ä»£ç†æœåŠ¡å™¨è§£æçš„ DNS æœåŠ¡å™¨
    # (é€šå¸¸æ˜¯å¢ƒå¤– DNSï¼Œç”¨äºå®¢æˆ·ç«¯è‡ªèº«è¿æ¥è¿œç¨‹DoH/DoTæœåŠ¡å™¨æ—¶ä½¿ç”¨ï¼Œè€Œä¸æ˜¯ç»™å…¶ä»–åº”ç”¨è§£æ)
    - https://doh.pub/dns-query
    - https://dns.alidns.com/dns-query # è¿™é‡Œä¹Ÿå¯ä»¥æ”¾ä¸€äº›ä½ ä¿¡ä»»çš„å›½å†… DoH (å®¢æˆ·ç«¯è‡ªèº«é€šè¿‡ä»£ç†è¿æ¥è¿™äº›DNS)

  direct-nameserver: # DIRECT ç­–ç•¥ä½¿ç”¨çš„ DNS æœåŠ¡å™¨ (å¼ºåˆ¶èµ°ç›´è¿çš„æµé‡ä½¿ç”¨è¿™é‡Œçš„DNSè§£æ)
    - 223.5.5.5 # é˜¿é‡Œäº‘å…¬å…±DNS
    - 223.6.6.6 # é˜¿é‡Œäº‘å…¬å…±DNS
    # ä¹Ÿå¯ä»¥ä½¿ç”¨è¿è¥å•†çš„DNSï¼Œä¾‹å¦‚ 114.114.114.114, 119.29.29.29ç­‰
  direct-nameserver-follow-policy: false # DIRECT ç­–ç•¥çš„ DNS æ˜¯å¦éµå¾ª nameserver-policy (é€šå¸¸ä¿æŒ falseï¼Œç¡®ä¿DIRECTä½¿ç”¨direct-nameserver)

  fallback-filter: # è§¦å‘ fallback DNS çš„è¿‡æ»¤è§„åˆ™ (å¦‚æœåŒ¹é…è¿™äº›æ¡ä»¶ï¼ŒDNS æŸ¥è¯¢å°†ä½¿ç”¨ fallback ä¸­çš„DNSè¿›è¡Œè§£æ)
    geoip: true      # æ˜¯å¦æ ¹æ® GEOIP è§¦å‘ fallback (é€šå¸¸è®¾ç½®ä¸º trueï¼Œå›½å†…IPè§¦å‘fallback)
    geoip-code: CN   # GEOIP å›½å®¶ä»£ç  (é€šå¸¸è®¾ç½®ä¸º CN)
    geosite:         # æ ¹æ® GeoSite è§„åˆ™é›†è§¦å‘ fallback
      - gfw          # gfw åˆ—è¡¨å†…çš„åŸŸåä½¿ç”¨ fallback
    ipcidr:          # æ ¹æ® IP æ®µè§¦å‘ fallback
      - 240.0.0.0/4  # æ ‡å‡†çš„æµ‹è¯•ç½‘/ä¿ç•™ IP æ®µï¼Œé€šå¸¸ç”¨äºè¿‡æ»¤ fake-ip çš„æŸ¥è¯¢ï¼Œå¼ºåˆ¶ fallback è§£æçœŸå®IP
    domain:          # æ ¹æ®åŸŸååˆ—è¡¨è§¦å‘ fallback
      - '+.google.com'
      - '+.facebook.com'
      # ä¿®æ­£ï¼šåˆ é™¤ä¸è§„èŒƒçš„åŸŸåæ¡ç›® '+.youtube.com'
    # ç¤ºä¾‹ï¼šæ·»åŠ å…¶ä»–éœ€è¦å¼ºåˆ¶ fallback è§£æçš„åŸŸå
    # - '+.twitter.com'

  cache:             # DNS ç¼“å­˜è®¾ç½®
    enable: true
    ttl: 600           # ç¼“å­˜æ—¶é—´ï¼Œå•ä½ç§’

# ====================== ğŸŒ TUN è®¾ç½® (TUN) ======================
tun:
  enable: true       # æ˜¯å¦å¯ç”¨ TUN æ¨¡å¼
  stack: gvisor      # TUN æ¨¡å¼çš„åè®®æ ˆ (auto, gvisor, system)ã€‚gvisor é€šå¸¸å…¼å®¹æ€§æ›´å¥½ã€‚
  dns-hijack:        # DNS åŠ«æŒè®¾ç½®ï¼Œå°†ç³»ç»ŸDNSè¯·æ±‚åŠ«æŒåˆ°Clashç›‘å¬çš„DNSç«¯å£
    - "any:53"       # åŠ«æŒæ‰€æœ‰ç«¯å£ä¸º 53 çš„ UDP è¯·æ±‚
    - "tcp://any:53" # åŠ«æŒæ‰€æœ‰ç«¯å£ä¸º 53 çš„ TCP è¯·æ±‚
  auto-route: true   # æ˜¯å¦è‡ªåŠ¨æ·»åŠ è·¯ç”±è§„åˆ™ï¼Œå°†æµé‡å¯¼å‘TUNæ¥å£
  auto-detect-interface: true # æ˜¯å¦è‡ªåŠ¨æ£€æµ‹å‡ºå£ç½‘å¡ (é€‚ç”¨äºå¤šç½‘å¡ç¯å¢ƒ)
  exclude-process: # æ’é™¤åˆ—è¡¨ä¸­çš„è¿›ç¨‹åï¼Œè¿™äº›è¿›ç¨‹çš„æµé‡ä¸èµ° TUN (é€šå¸¸æ˜¯å®‰å…¨è½¯ä»¶æˆ–ç³»ç»Ÿè¿›ç¨‹)
    - "TM.exe"       # è…¾è®¯ç”µè„‘ç®¡å®¶ä¸»ç¨‹åº (ç¤ºä¾‹)
    - "AK.exe"       # æŸä¸ªæœªçŸ¥è¿›ç¨‹å (è¯·æ ¹æ®ä½ çš„å®é™…éœ€è¦ä¿®æ”¹æˆ–åˆ é™¤)
    # å¯ä»¥æ·»åŠ å…¶ä»–éœ€è¦æ’é™¤çš„è¿›ç¨‹ï¼Œä¾‹å¦‚ï¼š
    # - "clash.exe" # å¦‚æœæ˜¯Clashæœ¬èº«ï¼Œé¿å…å›ç¯

# ====================== âœ¨ ä»£ç†æä¾›è€…é€šç”¨è®¾ç½® (Proxy Provider Common Settings) ======================
p: &p # å®šä¹‰ä¸€ä¸ªé”šç‚¹ pï¼Œç”¨äºé‡å¤è®¾ç½®
  type: http       # ä»£ç†æä¾›è€…ç±»å‹ (http, file)
  # è‡ªåŠ¨æ›´æ–°è®¢é˜…æ—¶é—´ï¼Œå•ä½ä¸ºç§’
  interval: 14400     # 14400 ç§’ = 4 å°æ—¶ï¼Œæ¯ 4 å°æ—¶æ›´æ–°ä¸€æ¬¡è®¢é˜… (åŸæ³¨é‡Šå†™çš„æ˜¯æ¯å°æ—¶ï¼Œå·²æ›´æ­£)
  health-check:    # å¥åº·æ£€æŸ¥è®¾ç½®
    enable: true     # å¯ç”¨å¥åº·æ£€æŸ¥
    url: http://connectivitycheck.gstatic.com/generate_204 # æ£€æŸ¥ URL (æ ‡å‡†è¿é€šæ€§æ£€æŸ¥åœ°å€)
    # èŠ‚ç‚¹è¿é€šæ€§æ£€æµ‹æ—¶é—´ï¼Œå•ä½ä¸ºç§’
    interval: 800    # 800 ç§’ â‰ˆ 13.3 åˆ†é’Ÿï¼Œæ¯ 13.3 åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡èŠ‚ç‚¹è¿é€šæ€§ (åŸæ³¨é‡Šå†™çš„æ˜¯10åˆ†é’Ÿ)
    # èŠ‚ç‚¹è¶…æ—¶å»¶è¿Ÿï¼Œå•ä½ä¸ºæ¯«ç§’
    timeout: 3000    # 3 ç§’è¶…æ—¶ (åŸæ³¨é‡Šå†™çš„æ˜¯2ç§’)
    # èŠ‚ç‚¹è‡ªåŠ¨åˆ‡æ¢å·®å€¼ï¼Œå•ä½ä¸ºæ¯«ç§’ (url-testç±»å‹ç»„ç”Ÿæ•ˆ)
    tolerance: 600   # å¦‚æœæœ€ä½³èŠ‚ç‚¹çš„å»¶è¿Ÿé«˜äºæ¬¡ä½³èŠ‚ç‚¹ + toleranceï¼ŒClashå¯èƒ½ä¼šåˆ‡æ¢åˆ°æ¬¡ä½³èŠ‚ç‚¹ã€‚

# ====================== ğŸ“‘ ä»£ç†æä¾›è€… (Proxy Providers) ======================
# å®šä¹‰ä»£ç†èŠ‚ç‚¹æ¥æºï¼Œå¯ä»¥æ˜¯è®¢é˜…é“¾æ¥æˆ–æœ¬åœ°æ–‡ä»¶
proxy-providers:
  CMå–‚é¥­å¹²è´§æ»¡æ»¡:
    <<: *p
    # path: ./CMå–‚é¥­å¹²è´§æ»¡æ»¡.yaml
    url: "https://SOS.CMLiussss.net/auto"
    # å¦‚éœ€è¦ä¸ºè¯¥è®¢é˜…ç»„èŠ‚ç‚¹æ·»åŠ å‰ç¼€ï¼Œå–æ¶ˆä¸‹é¢ä¸¤è¡Œæ³¨é‡Š
    # override:
      # additional-prefix: "[CMå–‚é¥­å¹²è´§æ»¡æ»¡]"

  # æœ¬åœ°é…ç½®: # æœ¬åœ°æ–‡ä»¶æä¾›è€…ç¤ºä¾‹ï¼Œå¦‚æœä¸éœ€è¦è¯·åˆ é™¤æˆ–æ³¨é‡Šæ‰æ•´ä¸ªå—
  #   <<: *p
  #   type: file # æœ¬åœ°æ–‡ä»¶æä¾›è€…ç±»å‹åº”ä¸º file
  #   path: ./proxy_provider/æœ¬åœ°é…ç½®.yaml # æŒ‡å‘æœ¬åœ° YAML æ–‡ä»¶
  #   # interval é€šå¸¸ç”¨äºè¿œç¨‹URLï¼Œæœ¬åœ°æ–‡ä»¶ä¸éœ€è¦é¢‘ç¹æ£€æŸ¥æ›´æ–°ï¼Œå¯ä»¥åˆ é™¤æˆ–è®¾ç½®è¾ƒå¤§å€¼
  #   interval: 86400 # ä¾‹å¦‚æ¯å¤©æ£€æŸ¥ä¸€æ¬¡æ–‡ä»¶ä¿®æ”¹
  #   # health-check è®¾ç½®ä¸è¿œç¨‹æä¾›è€…ç›¸åŒ
  #   health-check:
  #     enable: true
  #     url: http://connectivitycheck.gstatic.com/generate_204
  #     interval: 600
  #     timeout: 3000
  #     tolerance: 100
  #   # å¦‚éœ€è¦ä¸ºè¯¥è®¢é˜…ç»„èŠ‚ç‚¹æ·»åŠ å‰ç¼€ï¼Œå–æ¶ˆä¸‹é¢ä¸¤è¡Œæ³¨é‡Š
  #     # additional-prefix: "[æœ¬åœ°é…ç½®]"

# ====================== ğŸ¯ ä»£ç†ç»„ (Proxy Groups) ======================
proxy-groups:
  - name: âœˆï¸ èŠ‚ç‚¹é€‰æ‹©
    type: select # ç±»å‹ä¸º select (é€‰æ‹©)ï¼Œç”¨æˆ·åœ¨è¿™ä¸ªç»„é‡ŒæŒ‘é€‰æœ€ç»ˆä½¿ç”¨çš„èŠ‚ç‚¹æˆ–åœ°åŒºç»„
    proxies:
      - ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹ # <-- å¯ä»¥é€‰æ‹©é¦™æ¸¯èŠ‚ç‚¹ç»„ä¸­çš„èŠ‚ç‚¹
      - ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹ # <-- å¯ä»¥é€‰æ‹©ç¾å›½èŠ‚ç‚¹ç»„ä¸­çš„èŠ‚ç‚¹
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹
      - ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹
      - ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹
      - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹
      - ğŸš€ æˆ‘çš„èŠ‚ç‚¹ # <-- åŒ…å«æ‰€æœ‰è¿‡æ»¤åèŠ‚ç‚¹çš„ç»„
      - ğŸ˜è´Ÿè½½å‡è¡¡ # <-- åŒ…å«æ‰€æœ‰ä¸å«æ’é™¤å…³é”®è¯çš„èŠ‚ç‚¹ï¼Œå¹¶è¿›è¡Œè´Ÿè½½å‡è¡¡
      - DIRECT # <-- ç›´è¿ç­–ç•¥

  - name: ğŸ¿ å›½å¤–åª’ä½“
    type: select # ç±»å‹ä¸º select (é€‰æ‹©)
    proxies:
      - âœˆï¸ èŠ‚ç‚¹é€‰æ‹© # <-- å¯ä»¥é€‰æ‹©ä»ä¸»è¦çš„èŠ‚ç‚¹é€‰æ‹©ç»„ä¸­æŒ‘é€‰
      - ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹
      - ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹
      - ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹
      - ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹
      - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹
      - ğŸš€ æˆ‘çš„èŠ‚ç‚¹
      - ğŸ˜è´Ÿè½½å‡è¡¡
      - DIRECT

  - name: ğŸ“Ÿ æ™ºèƒ½åŠ©ç†
    type: select # ç±»å‹ä¸º select (é€‰æ‹©)
    proxies:
      - ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹
      - ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹
      - ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹
      - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹
      - ğŸš€ æˆ‘çš„èŠ‚ç‚¹
      - DIRECT

  - name: â“‚ï¸ å¾®è½¯æœåŠ¡
    type: select # ç±»å‹ä¸º select (é€‰æ‹©)
    proxies:
      - âœˆï¸ èŠ‚ç‚¹é€‰æ‹© # <-- å¯ä»¥é€‰æ‹©ä»ä¸»è¦çš„èŠ‚ç‚¹é€‰æ‹©ç»„ä¸­æŒ‘é€‰
      - ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹
      - ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹
      - ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹
      - ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹
      - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹
      - ğŸš€ æˆ‘çš„èŠ‚ç‚¹
      - ğŸ˜è´Ÿè½½å‡è¡¡
      - DIRECT

  - name: ğŸ è‹¹æœæœåŠ¡
    type: select # ç±»å‹ä¸º select (é€‰æ‹©)
    proxies:
      - âœˆï¸ èŠ‚ç‚¹é€‰æ‹© # <-- å¯ä»¥é€‰æ‹©ä»ä¸»è¦çš„èŠ‚ç‚¹é€‰æ‹©ç»„ä¸­æŒ‘é€‰
      - ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹
      - ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹
      - ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹
      - ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹
      - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹
      - ğŸš€ æˆ‘çš„èŠ‚ç‚¹
      - DIRECT

  - name: ğŸ® æ¸¸æˆå¹³å°
    type: select # ç±»å‹ä¸º select (é€‰æ‹©)
    proxies:
      - âœˆï¸ èŠ‚ç‚¹é€‰æ‹© # <-- å¯ä»¥é€‰æ‹©ä»ä¸»è¦çš„èŠ‚ç‚¹é€‰æ‹©ç»„ä¸­æŒ‘é€‰
      - ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹
      - ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹
      - ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹
      - ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹
      - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹
      - ğŸš€ æˆ‘çš„èŠ‚ç‚¹
      - DIRECT

  - name: ğŸš€ æˆ‘çš„èŠ‚ç‚¹ # è¿™ä¸ªç»„é€šå¸¸ç”¨äºåŒ…å«æ‰€æœ‰æ¥è‡ªè®¢é˜…æˆ–å…¶ä»–æä¾›è€…çš„èŠ‚ç‚¹
    include-all: true # åŒ…å«æ‰€æœ‰ä»£ç†æä¾›è€…ä¸­çš„èŠ‚ç‚¹
    type: select # ç±»å‹ä¸º select (é€‰æ‹©)ï¼Œå…è®¸ç”¨æˆ·æ‰‹åŠ¨é€‰æ‹©å…¶ä¸­ä¸€ä¸ªèŠ‚ç‚¹
    # æ³¨æ„ï¼šè¿™é‡Œä¸éœ€è¦ filterï¼Œå› ä¸º filter åº”è¯¥åœ¨å¼•ç”¨è¿™äº›èŠ‚ç‚¹çš„ç»„ä¸­è¿›è¡Œï¼Œæˆ–è€…åœ¨ proxy-providers ä¸­è¿›è¡Œè¿‡æ»¤

  # å®šä¹‰å„ä¸ªå›½å®¶/åœ°åŒºçš„èŠ‚ç‚¹ç»„ï¼Œå¹¶åº”ç”¨è¿‡æ»¤å™¨
  - name: ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹
    type: url-test # ç±»å‹ä¸º url-testï¼Œè‡ªåŠ¨é€‰æ‹©å»¶è¿Ÿæœ€ä½çš„èŠ‚ç‚¹
    include-all: true # åŒ…å«æ‰€æœ‰ä»£ç†æä¾›è€…ä¸­çš„èŠ‚ç‚¹
    filter: ^(?!.*(?:é‚®ç®±|æµé‡|è®¢é˜…|é¢‘é“|å‰©ä½™|åˆ°æœŸ|å¥—é¤|å®˜ç½‘|åŠ å…¥))(?i).*?(?:æ¸¯|HK|hk|Hong Kong|HongKong|hongkong).* # ä¿®æ­£åçš„è¿‡æ»¤å™¨
    interval: 300
    tolerance: 50

  - name: ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹
    type: url-test
    include-all: true
    filter: ^(?!.*(?:é‚®ç®±|æµé‡|è®¢é˜…|é¢‘é“|å‰©ä½™|åˆ°æœŸ|å¥—é¤|å®˜ç½‘|åŠ å…¥))(?i).*?(?:æ—¥æœ¬|å·æ—¥|ä¸œäº¬|å¤§é˜ª|æ³‰æ—¥|åŸ¼ç‰|æ²ªæ—¥|æ·±æ—¥|JP|Japan).* # ä¿®æ­£åçš„è¿‡æ»¤å™¨
    interval: 300
    tolerance: 50

  - name: ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹
    type: url-test
    include-all: true
    filter: ^(?!.*(?:é‚®ç®±|æµé‡|è®¢é˜…|é¢‘é“|å‰©ä½™|åˆ°æœŸ|å¥—é¤|å®˜ç½‘|åŠ å…¥))(?i).*?(?:ç¾|æ³¢ç‰¹å…°|è¾¾æ‹‰æ–¯|ä¿„å‹’å†ˆ|å‡¤å‡°åŸ|è´¹åˆ©è’™|ç¡…è°·|æ‹‰æ–¯ç»´åŠ æ–¯|æ´›æ‰|åœ£ä½•å¡|åœ£å…‹æ‹‰æ‹‰|è¥¿é›…å›¾|èŠåŠ å“¥|US|United States).* # ä¿®æ­£åçš„è¿‡æ»¤å™¨
    interval: 300
    tolerance: 50

  - name: ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹
    type: url-test
    include-all: true
    filter: ^(?!.*(?:é‚®ç®±|æµé‡|è®¢é˜…|é¢‘é“|å‰©ä½™|åˆ°æœŸ|å¥—é¤|å®˜ç½‘|åŠ å…¥))(?i).*?(?:å°|æ–°åŒ—|å½°åŒ–|TW|Taiwan).* # ä¿®æ­£åçš„è¿‡æ»¤å™¨
    interval: 300
    tolerance: 50

  - name: ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹
    type: url-test
    include-all: true
    filter: ^(?!.*(?:é‚®ç®±|æµé‡|è®¢é˜…|é¢‘é“|å‰©ä½™|åˆ°æœŸ|å¥—é¤|å®˜ç½‘|åŠ å…¥))(?i).*?(?:æ–°åŠ å¡|å¡|ç‹®åŸ|SG|Singapore).* # ä¿®æ­£åçš„è¿‡æ»¤å™¨
    interval: 300
    tolerance: 50

  - name: ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹
    type: url-test
    include-all: true
    filter: ^(?!.*(?:é‚®ç®±|æµé‡|è®¢é˜…|é¢‘é“|å‰©ä½™|åˆ°æœŸ|å¥—é¤|å®˜ç½‘|åŠ å…¥))(?i).*?(?:KR|Korea|KOR|é¦–å°”|éŸ©|éŸ“).* # ä¿®æ­£åçš„è¿‡æ»¤å™¨
    interval: 300
    tolerance: 50

  - name: ğŸ˜è´Ÿè½½å‡è¡¡ # è¿™ä¸ªç»„åŒ…å«æ‰€æœ‰ä¸å«æ’é™¤å…³é”®è¯çš„èŠ‚ç‚¹ï¼Œå¹¶è¿›è¡Œè´Ÿè½½å‡è¡¡
    include-all: true # åŒ…å«æ‰€æœ‰ä»£ç†æä¾›è€…ä¸­çš„èŠ‚ç‚¹
    type: load-balance # ç±»å‹ä¸º load-balanceï¼Œè‡ªåŠ¨åœ¨ç»„å†…èŠ‚ç‚¹é—´åˆ†é…æµé‡
    filter: ^(?!.*(?:é‚®ç®±|æµé‡|è®¢é˜…|é¢‘é“|å‰©ä½™|åˆ°æœŸ|å¥—é¤|å®˜ç½‘|åŠ å…¥))(?i).* # ä¿®æ­£åçš„è¿‡æ»¤å™¨ï¼Œæ’é™¤åŒ…å«å…³é”®è¯çš„æ‰€æœ‰èŠ‚ç‚¹

# ====================== ğŸ“¦ è§„åˆ™æä¾›è€… (Rule Providers) ======================
rule-providers:
  openai:
    type: http
    behavior: classical # å‡è®¾è§„åˆ™æ–‡ä»¶æ˜¯åŸŸåæˆ– IP åˆ—è¡¨
    format: text
    url: "https://raw.githubusercontent.com/EAlyce/conf/refs/heads/main/Rule/OpenAI.list"
    interval: 86400 # æ¯å¤©æ›´æ–°ä¸€æ¬¡
    # path: ./rules/openai.yaml # å¦‚æœéœ€è¦æœ¬åœ°æ–‡ä»¶ï¼Œå–æ¶ˆæ³¨é‡Šå¹¶ä¿®æ”¹è·¯å¾„

  steam:
    type: http
    behavior: classical
    format: text
    url: "https://raw.githubusercontent.com/LM-Firefly/Rules/refs/heads/master/Game.list"
    interval: 86400

  chinamedia:
    type: http
    behavior: classical
    format: text
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/ChinaMedia/ChinaMedia.list"
    interval: 86400

  globalmedia:
    type: http
    behavior: classical
    format: text
    url: "https://raw.githubusercontent.com/LM-Firefly/Rules/refs/heads/master/GlobalMedia.list"
    interval: 86400

  chinamax:
    type: http
    behavior: classical
    format: text
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/ChinaMax/ChinaMax.list"
    interval: 86400

  AppleNews:
    type: http
    behavior: classical
    format: text
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/AppleNews/AppleNews.list"
    interval: 86400

# ====================== ğŸ“œ è§„åˆ™ (Rules) ======================
# æµé‡åŒ¹é…è§„åˆ™ï¼Œä»ä¸Šåˆ°ä¸‹ä¾æ¬¡åŒ¹é…ã€‚
# æ ¼å¼ï¼š - RULE_TYPE, value, policy, [options]
# å¼•ç”¨ rule-providers ä¸­çš„è§„åˆ™é›†ï¼š - RULE-SET,<provider-name>,<policy>,[options]
rules:
  # > å¹¿å‘Šæ‹¦æˆª (åŸé…ç½®æ³¨é‡Šæ‰äº†ï¼Œå¦‚æœéœ€è¦è¯·å–æ¶ˆæ³¨é‡Š)
  # - RULE-SET,reject_domainset,REJECT
  # - RULE-SET,reject_non_ip,REJECT,NO-RESOLVE # è¿œç¨‹è§„åˆ™é›†é€šå¸¸éœ€è¦ NO-RESOLVE é€‰é¡¹æ¥é¿å… DNS æ±¡æŸ“å½±å“åŒ¹é…
  # ç»•è¿‡å±€åŸŸç½‘åœ°å€
  - IP-CIDR,10.0.0.0/8,DIRECT
  - IP-CIDR,172.16.0.0/12,DIRECT
  - IP-CIDR,192.168.0.0/16,DIRECT
  - IP-CIDR,100.64.0.0/10,DIRECT
  - IP-CIDR,127.0.0.0/8,DIRECT
  # æ’é™¤è¿›ç¨‹ä¸èµ°ä»£ç†
  - PROCESS-NAME,TM.exe,DIRECT
  - PROCESS-NAME,AK.exe,DIRECT # è¯·ç¡®è®¤è¿™ä¸ªè¿›ç¨‹åæ˜¯å¦æ­£ç¡®

  # > æ™ºèƒ½åŠ©ç†
  - RULE-SET,openai,ğŸ“Ÿ æ™ºèƒ½åŠ©ç†,NO-RESOLVE

  # > è‹¹æœæœåŠ¡
  - DOMAIN,gateway.icloud.com,ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹
  - RULE-SET,AppleNews,ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹,NO-RESOLVE # AppleNews å•ç‹¬èµ°ç¾å›½èŠ‚ç‚¹
  - GEOSITE,apple,ğŸ è‹¹æœæœåŠ¡,NO-RESOLVE # å…¶ä»– Apple æœåŠ¡èµ°è‹¹æœæœåŠ¡ç»„

  # > GitHub
  - GEOSITE,github,âœˆï¸ èŠ‚ç‚¹é€‰æ‹©,NO-RESOLVE # Github èµ°èŠ‚ç‚¹é€‰æ‹©ç»„

  # > å¾®è½¯æœåŠ¡
  - GEOSITE,microsoft,â“‚ï¸ å¾®è½¯æœåŠ¡,NO-RESOLVE # å¾®è½¯æœåŠ¡èµ°å¾®è½¯æœåŠ¡ç»„

  # > ç¤¾äº¤å¹³å° (Telegram)
  - GEOIP,telegram,ğŸ˜è´Ÿè½½å‡è¡¡,NO-RESOLVE # Telegram èµ°ç”µæŠ¥ä¿¡æ¯ç»„

  # > æ¸¸æˆå¹³å°
  - RULE-SET,steam,ğŸ® æ¸¸æˆå¹³å°,NO-RESOLVE

  # > æµåª’ä½“æœåŠ¡
  - RULE-SET,chinamedia,DIRECT,NO-RESOLVE # å¤§é™†åª’ä½“å¼ºåˆ¶ç›´è¿
  - RULE-SET,globalmedia,ğŸ¿ å›½å¤–åª’ä½“,NO-RESOLVE # å…¶ä»–å›½å¤–åª’ä½“èµ°å›½å¤–åª’ä½“ç»„
  # > China (å›½å†…åœ°å€å¼ºåˆ¶ç›´è¿)
  - RULE-SET,chinamax,DIRECT,NO-RESOLVE # chinamax è§„åˆ™é›†å¼ºåˆ¶ç›´è¿
  - GEOIP,CN,DIRECT # å›½å†… IP åœ°å€å¼ºåˆ¶ç›´è¿

  # æœ€ç»ˆåŒ¹é…è§„åˆ™ (FALLBACK)
  - MATCH,âœˆï¸ èŠ‚ç‚¹é€‰æ‹© # æ‰€æœ‰æœªåŒ¹é…ä»¥ä¸Šè§„åˆ™çš„æµé‡ï¼Œèµ° âœˆï¸ èŠ‚ç‚¹é€‰æ‹© ç»„